<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kesarwa - Authentic Indian Sweets</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <style>
        html {
            scroll-behavior: smooth;
        }

        .fullscreen-bg {
            height: 100vh;
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('./homefinal.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        .call-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #ff9f43;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .back-to-top {
            position: fixed;
            bottom: 90px;
            right: 20px;
            background: #ff9f43;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
        }

        .call-button:hover, .back-to-top:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .menu-title {
            background: linear-gradient(45deg, #ff9f43, #ff8c2d);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 2px 2px 4px rgba(255, 159, 67, 0.2);
        }
        
        .explore-menu-btn {
            background: #ff9f43;
            color: white;
            padding: 15px 40px;
            border-radius: 50px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 159, 67, 0.3);
            transform: translateY(0);
        }
        
        .explore-menu-btn:hover {
            background: #ff8c2d;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 159, 67, 0.4);
        }
        
        .menu-section {
            background-color: #fff9f5;
            min-height: 100vh;
            display: block;
        }
        
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            padding: 24px;
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .menu-item {
            transition: all 0.3s ease;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .add-btn {
            background: #ff9f43;
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(255, 159, 67, 0.3);
        }
        
        .add-btn:hover {
            background: #ff8c2d;
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 4px 12px rgba(255, 159, 67, 0.4);
        }
        
        .quantity-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.2s ease;
            background: #ff9f43;
            color: white;
        }
        
        .quantity-btn:hover {
            background: #ff8c2d;
            transform: scale(1.1);
        }

        .cart-modal {
            background: linear-gradient(135deg, #fff9f5 0%, #fff5e6 100%);
            transform: translateY(100%);
            transition: transform 0.3s ease-out;
        }
        
        .cart-modal.show {
            transform: translateY(0);
        }

        .cart-item {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 12px;
            box-shadow: 0 4px 12px rgba(255, 159, 67, 0.1);
            border: 1px solid rgba(255, 159, 67, 0.1);
            transition: all 0.3s ease;
            overflow: hidden;
        }

        @keyframes removeItem {
            0% {
                opacity: 1;
                transform: scale(1);
                max-height: 200px;
                margin-bottom: 12px;
            }
            100% {
                opacity: 0;
                transform: scale(0.8);
                max-height: 0;
                margin-bottom: 0;
            }
        }
        
        .removing {
            animation: removeItem 0.2s ease-out forwards;
        }

        .cart-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 159, 67, 0.15);
        }

        .whatsapp-order-btn {
            background: linear-gradient(45deg, #25D366, #128C7E);
            color: white;
            padding: 16px 32px;
            border-radius: 50px;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
        }

        .whatsapp-order-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
        }

        .cart-total-section {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 4px 12px rgba(255, 159, 67, 0.1);
            border: 1px solid rgba(255, 159, 67, 0.1);
        }

        .cart-total-label {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff9f43, #ff8c2d);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .cart-total-amount {
            font-size: 2rem;
            font-weight: bold;
            color: #ff9f43;
        }
        
        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff9f43;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .menu-header {
            position: sticky;
            top: 0;
            z-index: 10;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
        }
        
        .flying-item {
            position: fixed;
            pointer-events: none;
            z-index: 1000;
            animation: flyToCart 0.8s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
        }
        
        @keyframes flyToCart {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(var(--endX), var(--endY)) scale(0.1);
                opacity: 0;
            }
        }
        
        .contact-section {
            background: linear-gradient(rgba(0,0,0,0.9), rgba(0,0,0,0.9));
            padding: 40px 0;
            color: white;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            max-width: 900px;
            margin: 0 auto;
        }

        @media (max-width: 1536px) {
            .menu-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 1024px) {
            .menu-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .add-btn {
                display: none;
            }
            
            .menu-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 12px !important;
                padding: 12px !important;
            }
            
            .menu-item {
                margin: 0;
            }
            
            .menu-item img {
                height: 140px !important;
            }
            
            .menu-item .p-6 {
                padding: 12px !important;
            }
            
            .menu-item h3 {
                font-size: 1.25rem !important;
            }

            .contact-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .cart-item {
                padding: 16px;
            }
            
            .cart-total-amount {
                font-size: 1.75rem;
            }

            .contact-section {
                padding: 20px 0;
            }

            .contact-grid > div {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Back to top button -->
    <a href="#top" class="back-to-top" id="backToTop" title="Back to top">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
        </svg>
    </a>

    <!-- Call button -->
    <a href="tel:+919425110995" class="call-button" title="Call us">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
        </svg>
    </a>

    <!-- Hero Section -->
    <div id="top" class="fullscreen-bg flex flex-col items-center justify-center text-white relative">
        <div class="text-center animate__animated animate__fadeIn">
            <h1 class="text-6xl md:text-7xl font-bold mb-4">Kesarwa</h1>
            <p class="text-2xl md:text-3xl mb-8">Experience a world of flavour with handcrafted, gourmet desserts</p>
            <button onclick="showMenu()" class="explore-menu-btn group">
                <span class="text-xl font-semibold">Explore Menu</span>
                <div class="mt-2 transform group-hover:translate-y-1 transition-transform">
                    <svg class="w-6 h-6 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </div>
            </button>
        </div>
    </div>

    <!-- Menu Section -->
    <div id="menuSection" class="menu-section">
        <div class="menu-header py-4 px-6 flex justify-between items-center">
            <h2 class="text-4xl font-bold menu-title">Our Menu</h2>
            <button onclick="showCart()" class="relative p-2 hover:scale-110 transition-transform">
                <svg class="w-8 h-8 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
                </svg>
                <div id="cartCount" class="cart-count animate__animated">0</div>
            </button>
        </div>

        <div class="menu-grid">
            <!-- Menu items will be rendered here -->
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="cart-modal fixed bottom-0 left-0 right-0 bg-white rounded-t-3xl p-6 max-h-[90vh] overflow-hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold menu-title">Your Cart</h2>
                <button onclick="closeCart()" class="p-2 hover:bg-gray-100 rounded-full transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div id="cartItems" class="max-h-[50vh] overflow-y-auto mb-6 space-y-4">
                <!-- Cart items will be rendered here -->
            </div>

            <div class="cart-total-section">
                <div class="flex justify-between items-center">
                    <span class="cart-total-label">Total Amount</span>
                    <span class="cart-total-amount">â‚¹<span id="cartTotal">0</span></span>
                </div>
                
                <button onclick="orderNow()" class="whatsapp-order-btn w-full">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                    </svg>
                    <span>Place Order on WhatsApp</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Contact Section -->
    <div id="contact" class="contact-section">
        <div class="max-w-4xl mx-auto px-6">
            <h2 class="text-3xl font-bold mb-6 text-center">Visit Us</h2>
            <div class="contact-grid">
                <div class="bg-white/10 backdrop-blur-md rounded-xl p-6">
                    <div class="flex items-start space-x-4">
                        <svg class="w-6 h-6 mt-1 text-orange-400 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                        <div>
                            <h3 class="text-lg font-semibold mb-2">Address</h3>
                            <p class="text-gray-300">A-12 VILLA, M.K.CITY, SIROL, GWALIOR (M.P)</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white/10 backdrop-blur-md rounded-xl p-6">
                    <div class="flex items-start space-x-4">
                        <svg class="w-6 h-6 mt-1 text-orange-400 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                        </svg>
                        <div>
                            <h3 class="text-lg font-semibold mb-2">Phone</h3>
                            <a href="tel:+919425110995" class="text-gray-300 hover:text-orange-400 transition-colors">+91 9425110995</a>
                        </div>
                    </div>
                </div>

                <div class="bg-white/10 backdrop-blur-md rounded-xl p-6">
                    <div class="flex items-start space-x-4">
                        <svg class="w-6 h-6 mt-1 text-orange-400 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>
                        </svg>
                        <div>
                            <h3 class="text-lg font-semibold mb-2">Website</h3>
                            <a href="https://www.kesarwa.com" target="_blank" class="text-gray-300 hover:text-orange-400 transition-colors">www.kesarwa.com</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const menuItems = [
            { id: 1, name: 'Gujiya', price: 700, image: './gujiya.jpg', unit: 'kg' },
            { id: 2, name: 'Atta Ladoo', price: 700, image: './attaladdoo.png', unit: 'kg' },
            { id: 3, name: 'Besan Ladoo', price: 600, image: './besanladdoo.webp', unit: 'kg' },
            { id: 4, name: 'Mathri', price: 350, image: './mathri.webp', unit: 'kg' },
            { id: 5, name: 'Namak Para', price: 350, image: './namak.jpg', unit: 'kg' },
            { id: 6, name: 'Achari Mathri', price: 400, image: './achari.jpg', unit: 'kg' },
            { id: 7, name: 'Kachori', price: 15, image: './kachoriii.jpg', unit: 'pc' },
            { id: 8, name: 'Besan Sev', price: 400, image: './besansev.jpg', unit: 'kg' },
            { id: 9, name: 'Dryfruit Chivda', price: 450, image: './dryfruitchivda.jpg', unit: 'kg' },
            { id: 10, name: 'Gulab Jamun', price: 500, image: './julabjamun.jpg', unit: 'kg' },
            { id: 11, name: 'Cocktail Dal Samosa', price: 15, image: './cocktailsamosa.jpg', unit: 'pc' }
        ];

        let cart = {};

        function showMenu() {
            document.getElementById('menuSection').scrollIntoView({ behavior: 'smooth' });
            renderMenu();
        }

        function renderMenu() {
            const menuGrid = document.querySelector('.menu-grid');
            menuGrid.innerHTML = menuItems.map(item => `
                <div class="menu-item group">
                    <img src="${item.image}" alt="${item.name}" class="w-full h-48 object-cover"/>
                    <div class="p-6">
                        <h3 class="text-2xl font-bold text-orange-600 mb-2">${item.name}</h3>
                        <p class="text-gray-700 text-lg mb-4">â‚¹${item.price} per ${item.unit}</p>
                        <div class="flex justify-between items-center">
                            <div class="flex items-center space-x-3">
                                <button onclick="updateCart(${item.id}, -1)" class="quantity-btn">-</button>
                                <span class="font-semibold text-lg" id="quantity-${item.id}">0</span>
                                <button onclick="updateCart(${item.id}, 1)" class="quantity-btn">+</button>
                            </div>
                            <button onclick="addToCartWithAnimation(${item.id}, event)" class="add-btn hidden md:block">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            updateAllQuantities();
        }

        // Improved updateCart function with immediate visual feedback
        function updateCart(itemId, change) {
            const prevCount = cart[itemId] || 0;
            const newCount = Math.max(0, prevCount + change);
            
            if (change < 0 && prevCount > 0) {
                const cartItem = document.querySelector(`[data-item-id="${itemId}"]`);
                if (cartItem) {
                    cartItem.classList.add('removing');
                    setTimeout(() => {
                        if (newCount === 0) {
                            delete cart[itemId];
                        } else {
                            cart[itemId] = newCount;
                        }
                        renderCart();
                    }, 200);
                } else {
                    if (newCount === 0) {
                        delete cart[itemId];
                    } else {
                        cart[itemId] = newCount;
                    }
                }
            } else {
                if (newCount === 0) {
                    delete cart[itemId];
                } else {
                    cart[itemId] = newCount;
                }
            }
            
            // Immediate UI updates
            requestAnimationFrame(() => {
                document.getElementById(`quantity-${itemId}`).textContent = newCount;
                updateCartCount();
                
                if (document.getElementById('cartModal').classList.contains('show') && change >= 0) {
                    renderCart();
                }
            });
        }

        function updateCartCount() {
            const totalItems = Object.values(cart).reduce((sum, qty) => sum + qty, 0);
            const cartCount = document.getElementById('cartCount');
            cartCount.textContent = totalItems;
            
            cartCount.classList.add('animate__animated', 'animate__bounce');
            setTimeout(() => {
                cartCount.classList.remove('animate__animated', 'animate__bounce');
            }, 500);
        }

        function renderCart() {
            const itemsDiv = document.getElementById('cartItems');
            let total = 0;
            
            const cartContent = Object.entries(cart).map(([itemId, quantity]) => {
                const item = menuItems.find(i => i.id === parseInt(itemId));
                const itemTotal = item.price * quantity;
                total += itemTotal;
                
                return `
                    <div class="cart-item" data-item-id="${itemId}">
                        <div class="flex justify-between items-center"><div>
                                <h3 class="font-semibold text-xl text-orange-600">${item.name}</h3>
                                <p class="text-gray-600 mt-1">â‚¹${item.price} per ${item.unit}</p>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-2">
                                    <button onclick="updateCart(${itemId}, -1)" 
                                        class="quantity-btn bg-orange-100 text-orange-600 hover:bg-orange-200 w-8 h-8">-</button>
                                    <span class="font-semibold text-lg w-8 text-center">${quantity}</span>
                                    <button onclick="updateCart(${itemId}, 1)" 
                                        class="quantity-btn bg-orange-100 text-orange-600 hover:bg-orange-200 w-8 h-8">+</button>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm text-gray-500">Subtotal</p>
                                    <span class="font-bold text-lg text-orange-600">â‚¹${itemTotal}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('') || '<div class="text-center py-8"><p class="text-gray-500 text-lg">Your cart is empty</p><p class="text-gray-400 mt-2">Add some delicious items to get started!</p></div>';
            
            requestAnimationFrame(() => {
                itemsDiv.innerHTML = cartContent;
                document.getElementById('cartTotal').textContent = total.toLocaleString();
            });
        }

        function addToCartWithAnimation(itemId, event) {
            const flyingItem = document.createElement('div');
            flyingItem.className = 'flying-item';
            
            const rect = event.target.getBoundingClientRect();
            const startX = rect.left + (rect.width / 2);
            const startY = rect.top + (rect.height / 2);
            
            const cartButton = document.querySelector('button[onclick="showCart()"]');
            const cartRect = cartButton.getBoundingClientRect();
            const endX = cartRect.left + (cartRect.width / 2) - startX;
            const endY = cartRect.top + (cartRect.height / 2) - startY;
            
            flyingItem.style.cssText = `
                left: ${startX}px;
                top: ${startY}px;
                --endX: ${endX}px;
                --endY: ${endY}px;
                width: 20px;
                height: 20px;
                background: #ff9f43;
                border-radius: 50%;
            `;
            
            document.body.appendChild(flyingItem);
            
            flyingItem.addEventListener('animationend', () => {
                flyingItem.remove();
                updateCart(itemId, 1);
            });
        }

        function updateAllQuantities() {
            menuItems.forEach(item => {
                const quantityElement = document.getElementById(`quantity-${item.id}`);
                if (quantityElement) {
                    quantityElement.textContent = cart[item.id] || 0;
                }
            });
            
            const totalItems = Object.values(cart).reduce((sum, qty) => sum + qty, 0);
            document.getElementById('cartCount').textContent = totalItems;
        }

        function showCart() {
            const modal = document.getElementById('cartModal');
            const backToTop = document.getElementById('backToTop');
            const callButton = document.querySelector('.call-button');
            
            backToTop.style.display = 'none';
            callButton.style.display = 'none';
            
            modal.classList.remove('hidden');
            requestAnimationFrame(() => {
                modal.querySelector('.cart-modal').classList.add('show');
            });
            renderCart();
        }

        function closeCart() {
            const modal = document.getElementById('cartModal');
            const cartContent = modal.querySelector('.cart-modal');
            const backToTop = document.getElementById('backToTop');
            const callButton = document.querySelector('.call-button');
            
            cartContent.classList.remove('show');
            setTimeout(() => {
                modal.classList.add('hidden');
                if (window.scrollY > 500) {
                    backToTop.style.display = 'flex';
                }
                callButton.style.display = 'flex';
            }, 300);
        }

        function orderNow() {
            const cartItems = Object.entries(cart)
                .map(([itemId, quantity]) => {
                    const item = menuItems.find(i => i.id === parseInt(itemId));
                    return `â€¢ *${item.name}*\n   - Quantity: ${quantity} ${item.unit}\n   - Price: â‚¹${item.price} per ${item.unit}\n   - Amount: â‚¹${item.price * quantity}`;
                });
            
            if (cartItems.length === 0) {
                alert('Please add items to your cart first');
                return;
            }

            const total = Object.entries(cart).reduce((sum, [itemId, quantity]) => {
                const item = menuItems.find(i => i.id === parseInt(itemId));
                return sum + (item.price * quantity);
            }, 0);

            const message = `Hello Kesarwa Team! ðŸ™\n\nI would like to place an order:\n\n${cartItems.join('\n\n')}\n\nðŸ’° *Total Amount: â‚¹${total.toLocaleString()}*\n\nKindly confirm my order.\n\nThank you! ðŸ˜Š`;
            
            window.open(`https://wa.me/919425110995?text=${encodeURIComponent(message)}`);
        }

        // Event listeners
        document.getElementById('cartModal').addEventListener('click', (e) => {
            if (e.target.id === 'cartModal') {
                closeCart();
            }
        });

        window.addEventListener('scroll', () => {
            const backToTop = document.getElementById('backToTop');
            if (window.scrollY > 500) {
                backToTop.style.opacity = '1';
                backToTop.style.pointerEvents = 'auto';
            } else {
                backToTop.style.opacity = '0';
                backToTop.style.pointerEvents = 'none';
            }
        });

        // Initialize menu rendering
        renderMenu();

        // Prevent scroll restoration
        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }
    </script>
</body>
</html>